<script>
window.dataLayer = window.dataLayer || [];
{{- $page := . -}}
window.dataLayer.push({
  'kind': {{ $page.Kind }},
  'type': {{ $page.Type }},
{{ if and $page.IsPage (eq $page.Type "post") -}}
{{- with $page.ReadingTime -}}
  'est_reading_min': {{ . }},
  'est_reading_ms_100': {{ mul . 60000 }},
  'est_reading_ms_75': {{ mul . 45000 }},
  'est_reading_ms_50': {{ mul . 30000 }},
  'est_reading_ms_25': {{ mul . 15000 }},
{{- end -}}
{{ with $page.Params.categories -}}
  'post_categories': {{apply . "urlize" "."}},
{{- end -}}
{{ with $page.Params.title -}}
  'post_title': "{{.}}"
{{- end -}}
{{- else if eq $page.Kind "taxonomy" -}}
{{ with $page.Pages -}}
{{- $page_count := len . -}}
{{- with $.Site.Params.paginate -}}
{{- if lt . $page_count -}}
{{- $page_count = . -}}
{{- end -}}
{{- end -}}
  'page_count': {{$page_count}},
{{- end -}}
{{ with $page.Dir -}}
  'taxonomy_category': "{{path.Base .}}"
{{- end -}}
{{- else if $page.IsHome -}}
{{ with $page.Pages -}}
{{- $page_count := len . -}}
{{- with $.Site.Params.paginate -}}
{{- if lt . $page_count -}}
{{- $page_count = . -}}
{{- end -}}
{{- end -}}
  'page_count': {{$page_count}}
{{- end -}}
{{- end -}}
});
</script>
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','{{ .Site.Params.container_id }}');</script>
<!-- End Google Tag Manager -->