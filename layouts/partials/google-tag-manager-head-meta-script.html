<script>
{{- $page := . -}}
{{ if and $page.IsPage (eq $page.Type "post") -}}
{{- with $page.ReadingTime -}}
var est_reading_ms_100 = {{ mul . 60000 }};
var est_reading_ms_75 = {{ mul . 45000 }};
var est_reading_ms_50 = {{ mul . 30000 }};
var est_reading_ms_25 = {{ mul . 15000 }};
{{- end -}}
{{- end -}}
window.dataLayer.push({
  'kind': {{ $page.Kind }},
  'type': {{ $page.Type }},
{{ if and $page.IsPage (eq $page.Type "post") -}}
{{- with $page.ReadingTime -}}
  'est_reading_min': {{ . }},
{{- end -}}
{{ with $page.Params.categories -}}
  'post_categories': {{apply . "urlize" "."}},
{{- end -}}
{{ with $page.Params.title -}}
  'post_title': "{{.}}"
{{- end -}}
{{- else if eq $page.Kind "taxonomy" -}}
{{ with $page.Pages -}}
{{- $page_count := len . -}}
{{- with $.Site.Params.paginate -}}
{{- if lt . $page_count -}}
{{- $page_count = . -}}
{{- end -}}
{{- end -}}
  'page_count': {{$page_count}},
{{- end -}}
{{ with $page.Dir -}}
  'taxonomy_category': "{{path.Base .}}"
{{- end -}}
{{- else if $page.IsHome -}}
{{ with $page.Pages -}}
{{- $page_count := len . -}}
{{- with $.Site.Params.paginate -}}
{{- if lt . $page_count -}}
{{- $page_count = . -}}
{{- end -}}
{{- end -}}
  'page_count': {{$page_count}}
{{- end -}}
{{- end -}}
});
</script>
